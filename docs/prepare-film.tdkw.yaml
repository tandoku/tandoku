stage: prepare
media: film
artifacts:
  src_subtitle:
    summary: |-
      Subtitle file added to volume with no changes to name or content.
      May or may not include language in filename (e.g. subtitle.ja.srt).
    container: volume
    location: source/{lang}/
    sourceControl: binary
  initial_subtitle:
    summary: |-
      Subtitle file renamed according to volume slug.
      Always includes language in filename (e.g. subtitle.ja.srt).
    container: volume
    location: subtitles/initial/
    sourceControl: text
  src_video:
    container: volume
    location: source/
    sourceControl: binary
  initial_video:
    summary: |-
      Video file renamed according to volume slug.
    container: volume
    location: video/initial/
    sourceControl: binary
simpleValues:
  src_language:
    summary: Auto (default), None or a language code
  src_folder:
    summary: empty (default), original, investigate, unused, ...
operations:
  wikipedia_lookup:
    outputs:
      - volume_title
      - original_media
  tandoku_volume_new:
    inputs:
      - volume_title
      - original_media
    outputs:
      - volume_tdkv
  tandoku_source_import:
    summary: |-
      Copies files specified by importPath to volume source directory.
      Automatically infers language from *.{lang}.{ext} filename if language is auto.
    inputs:
      - volume_tdkv
      - external_subtitle
      - external_video
      - src_language
      - src_folder
    outputs:
      - src_subtitle
      - src_video
  tandoku_subtitles_init:
    inputs:
      - volume_tdkv
      - src_subtitle
    outputs:
      - initial_subtitle
