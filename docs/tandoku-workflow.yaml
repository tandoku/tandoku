artifactMeta:
  container: external
  template: film
artifacts:
  external_subtitle:
    description: External subtitle file outside the tandoku library.
  external_video:
    description: External video file outside the tandoku library.
---
artifactMeta:
  container: volume
  template: film
artifacts:
  src_subtitle:
    location: source/{lang}/
    sourceControl: binary
    description: |-
      Subtitle file added to volume with no changes to name or content.
      May or may not include language in filename (e.g. subtitle.ja.srt).
  initial_subtitle:
    location: subtitles/initial/
    sourceControl: text
    description: |-
      Subtitle file renamed according to volume slug.
      Always includes language in filename (e.g. subtitle.ja.srt).
  src_video:
    location: source/
    sourceControl: binary
  initial_video:
    location: video/initial/
    sourceControl: binary
    description: |-
      Video file renamed according to volume slug.
values:
  src_language:
    description: Auto (default), None or a language code
  src_folder:
    description: empty (default), original, investigate, unused, ...
operations:
  wikipedia_lookup:
    outputs:
      - volume_title
      - original_media
  tandoku_volume_new:
    inputs:
      - volume_title
      - original_media
    outputs:
      - volume_tdkv
  tandoku_source_import:
    inputs:
      - volume_tdkv
      - external_subtitle
      - external_video
      - src_language
      - src_folder
    outputs:
      - src_subtitle
      - src_video
    description: |-
      Copies files specified by importPath to volume source directory.
      Automatically infers language from *.{lang}.{ext} filename if language is auto.
  tandoku_subtitles_init:
    inputs:
      - volume_tdkv
      - src_subtitle
    outputs:
      - initial_subtitle