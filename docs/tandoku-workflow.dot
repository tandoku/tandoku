digraph {
    graph [fontname="Helvetica"];
    node [fontname="Helvetica" penwidth=0.2];
    edge [fontname="Helvetica" arrowsize="0.6"];

    # processes
    node [shape=rect style="filled" fillcolor=blue fontcolor=white];
    tandoku_new_volume

    tandoku_tokenize
    tandoku_list_volume
    tandoku_list_content
    tandoku_export_tokens_csv

    ## film processes
    tandoku_subtitles_import
    tandoku_subtitles_rename
    tandoku_subtitles_clean
    tandoku_subtitles_align
    tandoku_subtitles_finalize

    tandoku_video_import
    tandoku_video_rename
    tandoku_video_clean
    tandoku_video_finalize
    tandoku_video_export

    tandoku_transform_film

    # artifacts
    node [shape=rect style="filled,rounded" fillcolor=orange];
    volume_tdkv

    raw_content
    transformed_content
    tokenized_content
    "tokenized_content[]"
    tokens_csv
    volume

    ## film artifacts
    external_subtitle
    src_subtitle
    renamed_subtitle
    clean_subtitle
    aligned_subtitle
    final_subtitle

    external_video
    src_video
    renamed_video
    clean_video
    final_video

    exported_video
    exported_subtitles

    # user input
    node [shape=rect style="filled,rounded" fillcolor=green];
    volume_input

    # edges
    volume_input -> tandoku_new_volume
    tandoku_new_volume -> volume_tdkv

    raw_content -> tandoku_transform_film
    tandoku_transform_film -> transformed_content
    transformed_content -> tandoku_tokenize
    tandoku_tokenize -> tokenized_content

    tandoku_list_volume -> volume

    tokenized_content -> tandoku_list_content
    volume -> tandoku_list_content
    tandoku_list_content -> "tokenized_content[]"

    "tokenized_content[]" -> tandoku_export_tokens_csv
    tandoku_export_tokens_csv -> tokens_csv

    ## film edges
    external_subtitle -> tandoku_subtitles_import
    volume_tdkv -> tandoku_subtitles_import
    tandoku_subtitles_import -> src_subtitle
    src_subtitle -> tandoku_subtitles_rename
    volume_tdkv -> tandoku_subtitles_rename
    tandoku_subtitles_rename -> renamed_subtitle
    renamed_subtitle -> tandoku_subtitles_clean
    tandoku_subtitles_clean -> clean_subtitle

    external_video -> tandoku_video_import
    volume_tdkv -> tandoku_video_import
    tandoku_video_import -> src_video
    src_video -> tandoku_video_rename
    volume_tdkv -> tandoku_video_rename
    tandoku_video_rename -> renamed_video
    renamed_video -> tandoku_video_clean
    tandoku_video_clean -> clean_video
    clean_video -> tandoku_video_finalize
    tandoku_video_finalize -> final_video

    clean_subtitle -> tandoku_subtitles_align
    final_video -> tandoku_subtitles_align
    tandoku_subtitles_align -> aligned_subtitle
    aligned_subtitle -> tandoku_subtitles_finalize
    tandoku_subtitles_finalize -> final_subtitle

    final_subtitle -> tandoku_video_export
    final_video -> tandoku_video_export
    tandoku_video_export -> exported_video
    tandoku_video_export -> exported_subtitles
}