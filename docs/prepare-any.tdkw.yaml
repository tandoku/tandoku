stage: prepare
artifacts:
  volume_tdkv:
    summary: Holds metadata for a single tandoku volume.
    container: volume
    location: "{title}.tdkv.yaml"
    sourceControl: text

  initial_content:
    container: volume
  transformed_content:
    container: volume
  merged_content:
    container: volume
  tokenized_content:
    container: volume
  final_content:
    container: volume

  images:
    container: volume

simpleValues:
  src_language:
    summary: Auto (default), None or a language code
  src_folder:
    summary: empty (default), original, investigate, unused, ...

operations:
  wikipedia_lookup:
    outputs:
      - volume_title
      - original_media
  tandoku_volume_new:
    inputs:
      - volume_title
      - original_media
    outputs:
      - volume_tdkv

  tandoku_source_import:
    summary: |-
      Copies files specified by importPath to volume source directory.
      Automatically infers language from *.{lang}.{ext} filename if language is auto.
    inputs:
      - volume_tdkv
      - src_language
      - src_folder

  tandoku_content_merge:
    inputs:
      - transformed_content
    outputs:
      - merged_content
  tandoku_content_finalize:
    #TODO: this is template specific, should just be defined in specific templates?
    #inputs:
    #  - merged_content
    outputs:
      - final_content
  tandoku_content_tokenize:
    inputs:
      - final_content
    outputs:
       - tokenized_content